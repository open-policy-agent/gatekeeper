<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v3.9.x plugin-docs plugin-id-default docs-doc-id-customize-startup">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Customizing Startup Behavior | Gatekeeper</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.9.x/customize-startup"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v3.9.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v3.9.x"><meta data-rh="true" name="docsearch:version" content="v3.9.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v3.9.x"><meta data-rh="true" property="og:title" content="Customizing Startup Behavior | Gatekeeper"><meta data-rh="true" name="description" content="Allow retries when adding objects to OPA"><meta data-rh="true" property="og:description" content="Allow retries when adding objects to OPA"><link data-rh="true" rel="icon" href="/gatekeeper/website/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.9.x/customize-startup"><link data-rh="true" rel="alternate" href="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.9.x/customize-startup" hreflang="en"><link data-rh="true" rel="alternate" href="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.9.x/customize-startup" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://PT2IX43ZFM-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-73GS7H3M4S"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-73GS7H3M4S",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Gatekeeper" href="/gatekeeper/website/opensearch.xml"><link rel="stylesheet" href="/gatekeeper/website/assets/css/styles.6513467a.css">
<link rel="preload" href="/gatekeeper/website/assets/js/runtime~main.a118252d.js" as="script">
<link rel="preload" href="/gatekeeper/website/assets/js/main.74750a7d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://open-policy-agent.github.io/gatekeeper/website/docs/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/gatekeeper/website/img/logo.svg" alt="Gatekeeper logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/gatekeeper/website/img/logo.svg" alt="Gatekeeper logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Gatekeeper</b></a><a href="https://open-policy-agent.github.io/gatekeeper-library/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Policy Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/gatekeeper/website/docs/v3.9.x/">v3.9.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/gatekeeper/website/docs/next/customize-startup">Next</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/customize-startup">v3.11.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.10.x/customize-startup">v3.10.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/gatekeeper/website/docs/v3.9.x/customize-startup">v3.9.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.8.x/customize-startup">v3.8.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.7.x/customize-startup">v3.7.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.6.x/customize-startup">v3.6.x</a></li></ul></div><a href="https://github.com/open-policy-agent/gatekeeper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gatekeeper/website/docs/v3.9.x/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/install">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/examples">Examples</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/gatekeeper/website/docs/v3.9.x/howto">How to use Gatekeeper</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/howto">How to use Gatekeeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/audit">Audit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/violations">Handling Constraint Violations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/sync">Replicating Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/exempt-namespaces">Exempting Namespaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/library">Policy Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/customize-startup">Customizing Startup Behavior</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/customize-admission">Customizing Admission Behavior</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/debug">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/emergency">Emergency Recovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/vendor-specific">Cloud and Vendor Specific Fixes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/failing-closed">Failing Closed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/mutation">Mutation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/constrainttemplates">Constraint Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/externaldata">External Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/gator">The gator CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/workload-resources">Working with Workload Resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gatekeeper/website/docs/v3.9.x/operations">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/operations">Operations</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gatekeeper/website/docs/v3.9.x/developers">Contributing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/developers">Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/help">How to contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.9.x/security">Security</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Gatekeeper<!-- --> <b>v3.9.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/gatekeeper/website/docs/customize-startup">latest version</a></b> (<!-- -->v3.11.x<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">How to use Gatekeeper</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Customizing Startup Behavior</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3.9.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Customizing Startup Behavior</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="allow-retries-when-adding-objects-to-opa">Allow retries when adding objects to OPA<a href="#allow-retries-when-adding-objects-to-opa" class="hash-link" aria-label="Direct link to Allow retries when adding objects to OPA" title="Direct link to Allow retries when adding objects to OPA">​</a></h2><p>Gatekeeper&#x27;s webhook servers undergo a bootstrapping period during which they are unavailable until the initial set of resources (constraints, templates, synced objects, etc...) have been ingested. This prevents Gatekeeper&#x27;s webhook from validating based on an incomplete set of policies. This wait-for-bootstrapping behavior can be configured.</p><p>The <code>--readiness-retries</code> flag defines the number of retry attempts allowed for an object (a Constraint, for example) to be successfully added to OPA.  The default is <code>0</code>.  A value of <code>-1</code> allows for infinite retries, blocking the webhook until all objects have been added to OPA.  This guarantees complete enforcement, but has the potential to indefinitely block the webhook from serving requests.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-profiling-using-pprof">Enable profiling using <code>pprof</code><a href="#enable-profiling-using-pprof" class="hash-link" aria-label="Direct link to enable-profiling-using-pprof" title="Direct link to enable-profiling-using-pprof">​</a></h2><p>The <code>--enable-pprof</code> flag enables an HTTP server for profiling using the <a href="https://pkg.go.dev/net/http/pprof" target="_blank" rel="noopener noreferrer">pprof</a> library. By default, it serves to <code>localhost:6060</code> but the port can be customized with the <code>--pprof-port</code> flag.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disable-certificate-generation-and-rotation-for-gatekeepers-webhook">Disable certificate generation and rotation for Gatekeeper&#x27;s webhook<a href="#disable-certificate-generation-and-rotation-for-gatekeepers-webhook" class="hash-link" aria-label="Direct link to Disable certificate generation and rotation for Gatekeeper&#x27;s webhook" title="Direct link to Disable certificate generation and rotation for Gatekeeper&#x27;s webhook">​</a></h2><p>By default, Gatekeeper uses <a href="https://github.com/open-policy-agent/cert-controller" target="_blank" rel="noopener noreferrer"><code>open-policy-agent/cert-controller</code></a> to handle the webhook&#x27;s certificate rotation and generation. If you want to use a third-party solution, you may disable the cert-controller feature using <code>--disable-cert-rotation</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disable-opa-built-in-functions">Disable OPA built-in functions<a href="#disable-opa-built-in-functions" class="hash-link" aria-label="Direct link to Disable OPA built-in functions" title="Direct link to Disable OPA built-in functions">​</a></h2><p>The <code>--disable-opa-builtin</code> flag disables specific <a href="https://www.openpolicyagent.org/docs/v0.37.2/policy-reference/#built-in-functions" target="_blank" rel="noopener noreferrer">OPA built-ins functions</a>. Starting with v3.8.0, Gatekeeper disables the <code>http.send</code> built-in function by default. For more information, please see <a href="/gatekeeper/website/docs/v3.9.x/externaldata#motivation">external data</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alpha-emit-admission-and-audit-events">[Alpha]<!-- --> Emit admission and audit events<a href="#alpha-emit-admission-and-audit-events" class="hash-link" aria-label="Direct link to alpha-emit-admission-and-audit-events" title="Direct link to alpha-emit-admission-and-audit-events">​</a></h2><p>The <code>--emit-admission-events</code> flag enables the emission of all admission violations as Kubernetes events in the Gatekeeper namespace. This flag is in alpha stage and it is set to <code>false</code> by default.</p><p>The <code>--emit-audit-events</code> flag enables the emission of all audit violation as Kubernetes events in the Gatekeeper namespace. This flag is in alpha stage and it is set to <code>false</code> by default.</p><p>There are three types of events that are emitted by Gatekeeper when the above flags are enabled:</p><table><thead><tr><th>Event</th><th>Description</th></tr></thead><tbody><tr><td><code>FailedAdmission</code></td><td>The Gatekeeper webhook denied the admission request (default behavior).</td></tr><tr><td><code>WarningAdmission</code></td><td>When <code>enforcementAction: warn</code> is specified in the constraint.</td></tr><tr><td><code>DryrunViolation</code></td><td>When <code>enforcementAction: dryrun</code> is specified in the constraint.</td></tr><tr><td><code>AuditViolation</code></td><td>A violation is detected during an audit.</td></tr></tbody></table><blockquote><p>❗ Warning: if the same constraint and violating resource tuple was emitted for <a href="https://github.com/kubernetes/kubernetes/blob/v1.23.3/staging/src/k8s.io/client-go/tools/record/events_cache.go#L429-L438" target="_blank" rel="noopener noreferrer">more than 10 times in a 10-minute rolling interval</a>, the Kubernetes event recorder will aggregate the events, e.g.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">39s         Warning   FailedAdmission   namespace/test      (combined from similar events):  Admission webhook &quot;validation.gatekeeper.sh&quot; denied request, Resource Namespace: , Constraint: ns-must-have-gk, Message: you must provide labels: {&quot;gatekeeper&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Gatekeeper might burst 25 events about an object, but limit the refill rate to 1 new event every 5 minutes. This will help control the long-tail of events for resources that are always violating the constraint.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beta-enable-mutation-logging-and-annotations">[Beta]<!-- --> Enable mutation logging and annotations<a href="#beta-enable-mutation-logging-and-annotations" class="hash-link" aria-label="Direct link to beta-enable-mutation-logging-and-annotations" title="Direct link to beta-enable-mutation-logging-and-annotations">​</a></h2><p>The <code>--log-mutations</code> flag enables logging of mutation events and errors.</p><p>The <code>--mutation-annotations</code> flag adds the following two annotations to mutated objects:</p><table><thead><tr><th>Annotation</th><th>Value</th></tr></thead><tbody><tr><td><code>gatekeeper.sh/mutation-id</code></td><td>The UUID of the mutation.</td></tr><tr><td><code>gatekeeper.sh/mutations</code></td><td>A list of comma-separated mutations in the format of <code>&lt;MutationType&gt;/&lt;MutationNamespace&gt;/&lt;MutationName&gt;:&lt;MutationGeneration&gt;</code> that are applied to the object.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-configuration-options">Other Configuration Options<a href="#other-configuration-options" class="hash-link" aria-label="Direct link to Other Configuration Options" title="Direct link to Other Configuration Options">​</a></h2><p>For the complete list of configuration flags for your specific version of Gatekeeper, run the Gatekeeper binary with the <code>--help</code> flag. For example:</p><p><code>docker run openpolicyagent/gatekeeper:v3.10.0-beta.0 --help</code></p><p>To ensure you are seeing all relevant flags, be sure the image tag (<code>:3.10.0-beta.0</code> above) corresponds with the version of Gatekeeper you are running.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/open-policy-agent/gatekeeper/edit/master/website/versioned_docs/version-v3.9.x/customize-startup.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/gatekeeper/website/docs/v3.9.x/library"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Policy Library</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gatekeeper/website/docs/v3.9.x/customize-admission"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customizing Admission Behavior</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#allow-retries-when-adding-objects-to-opa" class="table-of-contents__link toc-highlight">Allow retries when adding objects to OPA</a></li><li><a href="#enable-profiling-using-pprof" class="table-of-contents__link toc-highlight">Enable profiling using <code>pprof</code></a></li><li><a href="#disable-certificate-generation-and-rotation-for-gatekeepers-webhook" class="table-of-contents__link toc-highlight">Disable certificate generation and rotation for Gatekeeper&#39;s webhook</a></li><li><a href="#disable-opa-built-in-functions" class="table-of-contents__link toc-highlight">Disable OPA built-in functions</a></li><li><a href="#alpha-emit-admission-and-audit-events" class="table-of-contents__link toc-highlight">Alpha Emit admission and audit events</a></li><li><a href="#beta-enable-mutation-logging-and-annotations" class="table-of-contents__link toc-highlight">Beta Enable mutation logging and annotations</a></li><li><a href="#other-configuration-options" class="table-of-contents__link toc-highlight">Other Configuration Options</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/open-policy-agent/gatekeeper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.openpolicyagent.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack (#opa-gatekeeper)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.google.com/document/d/1A1-Q-1OMw3QODs1wT6eqfLTagcGmgzAJAjJihiO3T48/edit)" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meetings<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/gatekeeper/website/assets/js/runtime~main.a118252d.js"></script>
<script src="/gatekeeper/website/assets/js/main.74750a7d.js"></script>
</body>
</html>