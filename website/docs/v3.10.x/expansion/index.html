<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v3.10.x plugin-docs plugin-id-default docs-doc-id-expansion">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Validation of Workload Resources | Gatekeeper</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.10.x/expansion"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v3.10.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v3.10.x"><meta data-rh="true" name="docsearch:version" content="v3.10.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v3.10.x"><meta data-rh="true" property="og:title" content="Validation of Workload Resources | Gatekeeper"><meta data-rh="true" name="description" content="Feature State: Gatekeeper version v3.10+ (alpha)"><meta data-rh="true" property="og:description" content="Feature State: Gatekeeper version v3.10+ (alpha)"><link data-rh="true" rel="icon" href="/gatekeeper/website/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.10.x/expansion"><link data-rh="true" rel="alternate" href="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.10.x/expansion" hreflang="en"><link data-rh="true" rel="alternate" href="https://open-policy-agent.github.io/gatekeeper/website/docs/v3.10.x/expansion" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://PT2IX43ZFM-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-73GS7H3M4S"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-73GS7H3M4S",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Gatekeeper" href="/gatekeeper/website/opensearch.xml"><link rel="stylesheet" href="/gatekeeper/website/assets/css/styles.6513467a.css">
<link rel="preload" href="/gatekeeper/website/assets/js/runtime~main.a118252d.js" as="script">
<link rel="preload" href="/gatekeeper/website/assets/js/main.74750a7d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://open-policy-agent.github.io/gatekeeper/website/docs/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/gatekeeper/website/img/logo.svg" alt="Gatekeeper logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/gatekeeper/website/img/logo.svg" alt="Gatekeeper logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Gatekeeper</b></a><a href="https://open-policy-agent.github.io/gatekeeper-library/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Policy Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/gatekeeper/website/docs/v3.10.x/">v3.10.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/gatekeeper/website/docs/next/expansion">Next</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/expansion">v3.11.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/gatekeeper/website/docs/v3.10.x/expansion">v3.10.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.9.x/">v3.9.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.8.x/">v3.8.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.7.x/">v3.7.x</a></li><li><a class="dropdown__link" href="/gatekeeper/website/docs/v3.6.x/">v3.6.x</a></li></ul></div><a href="https://github.com/open-policy-agent/gatekeeper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gatekeeper/website/docs/v3.10.x/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/install">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/examples">Examples</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/gatekeeper/website/docs/v3.10.x/howto">How to use Gatekeeper</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/howto">How to use Gatekeeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/audit">Audit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/violations">Handling Constraint Violations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/sync">Replicating Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/exempt-namespaces">Exempting Namespaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/library">Policy Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/customize-startup">Customizing Startup Behavior</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/customize-admission">Customizing Admission Behavior</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/debug">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/emergency">Emergency Recovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/vendor-specific">Cloud and Vendor Specific Fixes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/failing-closed">Failing Closed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/mutation">Mutation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/constrainttemplates">Constraint Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/externaldata">External Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/expansion">Validation of Workload Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/gator">The gator CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/workload-resources">Working with Workload Resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gatekeeper/website/docs/v3.10.x/operations">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/operations">Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/performance-tuning">Performance Tuning</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gatekeeper/website/docs/v3.10.x/developers">Contributing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/developers">Developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/help">How to contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gatekeeper/website/docs/v3.10.x/security">Security</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Gatekeeper<!-- --> <b>v3.10.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/gatekeeper/website/docs/expansion">latest version</a></b> (<!-- -->v3.11.x<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">How to use Gatekeeper</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Validation of Workload Resources</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3.10.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Validation of Workload Resources</h1></header><p><code>Feature State:</code> Gatekeeper version v3.10+ (alpha)</p><blockquote><p>❗This feature is in <em>alpha</em> stage, and is not enabled by default. To
enable, set the <code>enable-generator-resource-expansion</code> flag.</p></blockquote><p>A workload resource is a resource that creates other resources, such as a
Deployment or Job. Gatekeeper can be configured to reject workload resources
that might create a resource that violates a constraint. For example, one could
configure Gatekeeper to immediately reject deployments that would create a Pod
that violates a constraint instead of merely rejecting the Pods. To achieve
this, Gatekeeper creates a &quot;mock resource&quot; for the Pod, runs validation on it,
and aggregates the mock resource&#x27;s violations onto the parent resource (the
Deployment in this example).</p><p>To use this functionality, first specify which resources should be &quot;expanded&quot;
into mock resource(s) by creating an <code>ExpansionTemplate</code> custom resource. This
specifies the GVKs of the workload resources, the GVK of the resultant mock
resource, as well as which subfield of the workload resource should be used to
expand the mock resource (i.e. <code>spec.template</code> for most Pod-generating
resources).</p><p>In some cases, it may not be possible to build an accurate representation of a
mock resource by looking at the workload resource alone. For example, suppose a
cluster is using Istio, which will inject a sidecar container on specific
resources. This sidecar configuration is not specified in the config of the
workload resource (i.e. Deployment), but rather injected by Istio&#x27;s webhook. In
order to accurately represent mock resources modified by controllers or
webhooks, Gatekeeper leverages its
<a href="/gatekeeper/website/docs/v3.10.x/mutation">Mutations</a>
feature to allow mock resources to be manipulated into their desired form. In
the Istio example, <code>Assign</code> and <code>ModifySet</code> mutators could be configured to
mimic Istio sidecar injection. For further details on mutating mock resources
see the <a href="#match-source">Math Source</a> section below, or to see a working example,
see the <a href="#example">Example</a> section.</p><p>Any resources configured for expansion will be expanded by both the validating
webhook and
<a href="/gatekeeper/website/docs/v3.10.x/audit">Audit</a>. This
feature will only be enabled if a user creates a <code>ExpansionTemplate</code> that
targets some resource that exists on the cluster.</p><p>Note that the accuracy of enforcement depends on how well the mock resource
resembles the real thing. Mutations can help with this, but 100% accuracy is
impossible because not all fields can be predicted. For instance, deployments
create pods with random names. Inaccurate mocks may lead to over or under
enforcement. In the case of under enforcement, the resultant pod should still be
rejected. Finally, non-state-based policies (those that rely on transient
metadata such as requesting user or time of creation) cannot be enforced
accurately. This is because such metadata would necessarily be different when
creating the resultant resource. For example, a deployment is created using the
requesting user&#x27;s account, but the pod creation request comes from the service
account of the deployment controller.</p><p>If, for any reason, you want to exempt expanded resources from a specific
constraint, look at the <a href="#match-source">Match Source</a> section below.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-expansion">Configuring Expansion<a href="#configuring-expansion" class="hash-link" aria-label="Direct link to Configuring Expansion" title="Direct link to Configuring Expansion">​</a></h2><p>Expansion behavior is configured through the <code>ExpansionTemplate</code> custom
resource. Optionally, users can create <code>Mutation</code> custom resources to customize
how resources are expanded. Mutators with the <code>source: Generated</code> field will
only be applied when expanding workload resources, and will not mutate real
resources on the cluster. If the <code>source</code> field is not set, the <code>Mutation</code> will
apply to both expanded resources and real resources on the cluster.</p><p>Users can test their expansion configuration using the
<a href="/gatekeeper/website/docs/v3.10.x/gator"><code>gator expand</code> CLI</a>
.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="expansiontemplate">ExpansionTemplate<a href="#expansiontemplate" class="hash-link" aria-label="Direct link to ExpansionTemplate" title="Direct link to ExpansionTemplate">​</a></h4><p>The <code>ExpansionTemplate</code> custom resource specifies:</p><ul><li>Which resource(s) should be expanded, specified by their GVK</li><li>The GVK of the resultant resource</li><li>Which field to use as the &quot;source&quot; for the resultant resource. The template
source is a field on the parent resource which will be used as the base for
expanding it before any mutators are applied. For example, in a case where a
<code>Deployment</code> expands into a <code>Pod</code>, <code>spec.template</code> would typically be the
source.</li><li>Optionally, an enforcement action override can be used when validating resultant
resources. If this field is set, any violations against the resultant resource
will use this enforcement action. If an enforcement action is not specified by
the <code>ExpansionTemplate</code>, the enforcement action set by the Constraint in
violation will be used.</li></ul><p>Here is an example of a <code>ExpansionTemplate</code> that specifies that <code>DaemonSet</code>,
<code>Deployment</code>, <code>Job</code>, <code>ReplicaSet</code>, <code>ReplicationController</code>, and <code>StatefulSet</code>
should be expanded into a <code>Pod</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: expansion.gatekeeper.sh/v1alpha1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: ExpansionTemplate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: expand-deployments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  applyTo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - groups: [&quot;apps&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      kinds: [&quot;DaemonSet&quot;, &quot;Deployment&quot;, &quot;ReplicaSet&quot;, &quot;StatefulSet&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      versions: [&quot;v1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - groups: [&quot;&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      kinds: [&quot;ReplicationController&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      versions: [&quot;v1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - groups: [&quot;batch&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      kinds: [&quot;Job&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      versions: [&quot;v1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  templateSource: &quot;spec.template&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enforcementAction: &quot;warn&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  generatedGVK:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: &quot;Pod&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    group: &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    version: &quot;v1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With this <code>ExpansionTemplate</code>, any constraints that are configured to target
<code>Pods</code> will be evaluated on the &quot;mock Pods&quot; when a <code>Deployment</code> /<code>ReplicaSet</code> is
being reviewed. Any violations created against the mock Pod will have their
enforcement action set to <code>warn</code>, regardless of the enforcement actions
specified by the Constraint in violation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="match-source">Match Source<a href="#match-source" class="hash-link" aria-label="Direct link to Match Source" title="Direct link to Match Source">​</a></h4><p>The <code>source</code> field on the <code>match</code> API, present in the Mutation
and <code>ConstraintTemplate</code> kinds, specifies if the config should match Generated (
i.e. expanded) resources, Original resources, or both. The <code>source</code> field is
an <code>enum</code> which accepts the following values:</p><ul><li><code>Generated</code> – the config will only apply to expanded resources, <strong>and will not
apply to any real resources on the cluster</strong></li><li><code>Original</code> – the config will only apply to Original resources, and will not
affect expanded resources</li><li><code>All</code> – the config will apply to both <code>Generated</code> and <code>Original</code> resources.
This is the default value.</li></ul><p>For example, suppose a cluster&#x27;s <code>ReplicaSet</code> controller adds a default value
for <code>fooField</code> when creating Pods that cannot reasonably be added to the
<code>ReplicaSet</code>&#x27;s <code>spec.template</code>. If a constraint relies on these default values,
a user could create a Mutation custom resource that modifies expanded resources,
like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: mutations.gatekeeper.sh/v1alpha1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Assign</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: assign-foo-field</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  applyTo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - groups: [&quot;&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kinds: [&quot;Pod&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    versions: [&quot;v1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  location: &quot;spec.containers[name: *].fooField&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    assign:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      value: &quot;Bar&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  match:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    source: &quot;Generated&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    scope: Cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kinds:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - apiGroups: []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        kinds: []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Similarly, <code>Constraints</code> can be configured to only target expanded resources by
setting the <code>Constraint</code>&#x27;s <code>spec.match.source</code> field to <code>Generated</code>. This can
also be used to define different enforcement actions for expanded resources and
original resources.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h2><p>Suppose a cluster is using Istio, and has some policy configured to ensure
specified Pods have an Istio sidecar. To validate Deployments that would create
Pods which Istio will inject a sidecar into, we need to use mutators to mimic
the sidecar injection.</p><p>What follows is an example of:</p><ul><li>an  <code>ExpansionTemplate</code> configured to expand <code>Deployments</code> into <code>Pods</code></li><li>an <code>Assign</code> mutator to add the Istio sidecar container to <code>Pods</code></li><li>a <code>ModifySet</code> mutator to add the <code>proxy</code> and <code>sidecar</code> args</li><li>an inbound <code>Deployment</code>, and the resulting <code>Pod</code></li></ul><p><strong>Note that the Mutators set the <code>source: Generated</code> field, which will cause
them to only be applied when expanding resources specified
by <code>ExpansionTemplates</code>. These Mutators will not affect any real resources on
the cluster.</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: expansion.gatekeeper.sh/v1alpha1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: ExpansionTemplate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: expand-deployments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  applyTo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - groups: [ &quot;apps&quot; ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kinds: [ &quot;Deployment&quot; ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    versions: [ &quot;v1&quot; ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  templateSource: &quot;spec.template&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  generatedGVK:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: &quot;Pod&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    group: &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    version: &quot;v1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: mutations.gatekeeper.sh/v1beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Assign</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: add-sidecar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  source: Generated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  applyTo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - groups: [&quot;&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kinds: [&quot;Pod&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    versions: [&quot;v1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  match:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    scope: Namespaced</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: &quot;Generated&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kinds:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - apiGroups: [&quot;*&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      kinds: [&quot;Pod&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  location: &quot;spec.containers[name:istio-proxy]&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    assign:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      value:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name: &quot;istio-proxy&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        imagePullPolicy: IfNotPresent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        image: docker.io/istio/proxyv2:1.15.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - containerPort: 15090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          name: http-envoy-prom</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          protocol: TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        securityContext:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              allowPrivilegeEscalation: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              capabilities:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                drop:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                - ALL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: mutations.gatekeeper.sh/v1beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: ModifySet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: add-istio-args</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  source: Generated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  applyTo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - groups: [&quot;&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kinds: [&quot;Pod&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    versions: [&quot;v1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  location: &quot;spec.containers[name:istio-proxy].args&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  parameters:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    operation: merge</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    values:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fromList:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - proxy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - sidecar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: nginx-deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  replicas: 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - containerPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        args:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - &quot;/bin/sh&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When expanded, the above configs will produce the following <code>Pod</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - args:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - /bin/sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - containerPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - args:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - proxy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - sidecar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: docker.io/istio/proxyv2:1.15.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    imagePullPolicy: IfNotPresent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: istio-proxy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - containerPort: 15090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: http-envoy-prom</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      protocol: TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    securityContext:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      allowPrivilegeEscalation: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      capabilities:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        drop:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - ALL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/open-policy-agent/gatekeeper/edit/master/website/versioned_docs/version-v3.10.x/expansion.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/gatekeeper/website/docs/v3.10.x/externaldata"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">External Data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gatekeeper/website/docs/v3.10.x/gator"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">The gator CLI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-expansion" class="table-of-contents__link toc-highlight">Configuring Expansion</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/open-policy-agent/gatekeeper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.openpolicyagent.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack (#opa-gatekeeper)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.google.com/document/d/1A1-Q-1OMw3QODs1wT6eqfLTagcGmgzAJAjJihiO3T48/edit)" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meetings<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/gatekeeper/website/assets/js/runtime~main.a118252d.js"></script>
<script src="/gatekeeper/website/assets/js/main.74750a7d.js"></script>
</body>
</html>